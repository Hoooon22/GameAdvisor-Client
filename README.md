# GameAdvisor Client

JavaFX 기반의 게임 오버레이 클라이언트 및 AI 어드바이저 캐릭터

## 🎮 주요 특징

- **인터랙티브 캐릭터**: 마우스로 잡아서 날릴 수 있는 물리 효과가 적용된 어드바이저 캐릭터
- **완전 투명 오버레이**: 게임 플레이를 방해하지 않는 100% 투명한 오버레이 시스템
- **물리 시뮬레이션**: 중력, 충돌, 마찰력이 적용된 실감나는 캐릭터 물리 효과
- **스마트 애니메이션**: 드래그, 날아가기, 충돌, 기절 등 다양한 상황별 애니메이션
- **말풍선 상호작용**: 다양한 스타일의 말풍선으로 조언과 정보 제공
- **말풍선 관리 시스템**: 최소화/복원 기능과 X 버튼으로 사용자 제어 가능
- **클릭 회피 시스템**: 사용자가 클릭하는 위치를 피해 움직이는 스마트 캐릭터
- **AI + 웹 검색 통합**: Gemini AI와 웹 검색 결과를 결합한 더 정확한 공략 분석
- **게임별 맞춤 조언**: 각 게임에 특화된 개인화된 조언 시스템
- **실시간 게임 감지**: Windows API를 활용한 자동 게임 감지 및 추적

## 프로젝트 구조

```
client/
├── src/
│   └── main/java/com/gameadvisor/client/
│       ├── ui/
│       │   ├── GameAdvisorClient.java      # 메인 클라이언트
│       │   └── components/
│       │       ├── AdvisorCharacter.java   # 캐릭터 컴포넌트
│       │       ├── SpeechBubble.java       # 말풍선 컴포넌트
│       │       └── CharacterOverlay.java   # 오버레이 관리
│       ├── model/                          # 데이터 모델
│       ├── network/                        # API 통신
│       ├── service/                        # 게임 감지 서비스
│       └── util/                           # Windows API 유틸
├── build.gradle      # Gradle 빌드 설정
└── README.md         # 클라이언트 문서
```

## 기술 스택

- Java 17
- JavaFX 17
- Gradle
- JNA (Java Native Access) - Windows API 연동

## 🚀 시작하기

### 요구사항
- JDK 17 이상
- Gradle 8.x
- Windows 10/11 (현재 Windows만 지원)
- 인터넷 연결 (AI 분석용)

### 실행 방법

```bash
cd client
./gradlew run
```

## 🎮 사용법

### 기본 인터랙션
1. **게임 실행**: 지원되는 게임을 실행하면 캐릭터가 게임 화면 하단에 자동으로 나타남
2. **자동 활동**: 캐릭터가 10초마다 자동으로 걷거나 말풍선으로 조언 제공
3. **게임별 조언**: 각 게임에 맞는 특화된 팁과 조언을 말풍선으로 표시
4. **AI 화면 분석**: 캐릭터 오른쪽 위 🔍 버튼 클릭으로 현재 게임 화면을 AI가 분석하여 조언 제공

### 물리 인터랙션
1. **캐릭터 드래그**: 캐릭터를 마우스 왼쪽 버튼으로 클릭하고 드래그
2. **투사하기**: 원하는 방향과 거리만큼 드래그한 후 마우스 버튼을 놓으면 캐릭터가 날아감
3. **물리 효과**: 중력에 의해 떨어지고, 벽과 바닥에 충돌하며 현실적인 반응
4. **자동 복구**: 물리 효과가 끝나면 기절 상태를 거쳐 정상 상태로 복귀

### 애니메이션 상태
- **IDLE**: 평상시 서 있는 상태 (호흡 애니메이션)
- **WALKING**: 게임 창 내에서 걸어다니는 상태
- **TALKING**: 말풍선과 함께 대화하는 상태
- **THINKING**: 머리를 흔들며 생각하는 상태
- **DRAGGING**: 드래그되고 있는 상태 (크기 증가, 회전)
- **FLYING**: 공중에서 날아가는 상태
- **STUNNED**: 충돌 후 기절한 상태 (X자 눈, 흔들림)

### 말풍선 관리 기능
1. **X 버튼**: 공략 조언 말풍선의 오른쪽 위 빨간색 X 버튼으로 수동 닫기
2. **최소화 버튼**: 초록색 "-" 버튼으로 말풍선을 작업표시줄처럼 최소화
3. **복원 기능**: 최소화된 바를 클릭하여 다시 말풍선 복원
4. **부드러운 전환**: 200ms 페이드 애니메이션으로 자연스러운 전환 효과

### 클릭 회피 시스템
1. **클릭 감지**: 게임 화면 내 사용자 클릭 위치 실시간 감지
2. **회피 움직임**: 클릭 위치에서 150px 거리만큼 반대 방향으로 이동
3. **시간 제한**: 클릭 후 3초간 회피 효과 지속
4. **랜덤 요소**: 완전히 예측 가능하지 않은 자연스러운 회피 패턴

### 팁
- 캐릭터를 멀리 드래그할수록 더 빠르게 날아갑니다
- 물리 효과 중에는 자동 활동이 일시정지됩니다
- 게임 창 경계 밖으로는 나가지 않습니다
- 더블클릭으로 테스트 물리 효과를 실행할 수 있습니다
- 🔍 버튼을 클릭하면 AI가 현재 게임 상황을 분석하여 맞춤 조언을 제공합니다
- 공략 조언은 자동으로 사라지지 않아 천천히 읽을 수 있습니다
- X 버튼으로 공략 조언을 닫거나 "-" 버튼으로 최소화할 수 있습니다
- 캐릭터가 클릭하는 위치를 피해 움직여 게임 플레이를 방해하지 않습니다
- 말풍선 표시 시간은 텍스트 길이에 따라 자동으로 조절됩니다 (2-12초)

## 🎯 주요 기능

### 1. 물리 기반 캐릭터 인터랙션
- **마우스 드래그**: 캐릭터를 마우스로 잡아서 드래그할 수 있음
- **투사 물리**: 드래그 거리와 방향에 따라 캐릭터를 날릴 수 있음
- **실시간 물리**: 중력(400px/s²), 공기마찰력(0.995), 바운스 감쇠(0.75) 적용
- **벽면 충돌**: 게임 창 경계와의 충돌 시 현실적인 반발 효과
- **바닥 충돌**: 바닥 충돌 시 랜덤 효과와 점진적 정지

### 2. 다이나믹 애니메이션 시스템
- **서있기 (IDLE)**: 자연스러운 호흡 애니메이션
- **걷기 (WALKING)**: 팔다리 움직임이 있는 보행 애니메이션
- **말하기 (TALKING)**: 눈 깜빡임과 함께하는 대화 애니메이션
- **생각하기 (THINKING)**: 머리를 좌우로 흔드는 사고 애니메이션
- **드래그 중 (DRAGGING)**: 팔다리가 벌어지고 눈이 커지는 효과
- **날아가는 중 (FLYING)**: 팔다리를 펼친 상태로 날아가는 애니메이션
- **기절 (STUNNED)**: X자 눈과 흔들림 효과가 있는 기절 상태

### 3. 충돌 효과 시스템
- **시각적 피드백**: 충돌 시 색상 변화 (주황→노랑→원래색)
- **진동 효과**: 충돌 강도에 따른 캐릭터 진동
- **쿨다운 시스템**: 과도한 충돌 효과 방지 (200ms 간격)
- **물리 완료 후 안정화**: 3초 쿨다운으로 위치 강제 재설정 방지

### 4. AI 화면 분석 + 웹 검색 통합 시스템
- **Gemini Vision API**: Google의 최신 AI 모델로 게임 화면을 실시간 분석
- **웹 검색 통합**: AI 분석과 함께 최신 공략 정보를 웹에서 검색하여 종합 분석
- **하이브리드 분석**: AI의 시각적 분석 + 웹 검색의 최신 정보를 결합한 더 정확한 조언
- **화면 캡쳐**: 게임 창 영역만 정확히 캡쳐하여 AI에게 전송
- **상황별 조언**: 현재 게임 상황에 맞는 구체적이고 전략적인 조언 제공
- **비동기 처리**: 백그라운드에서 분석하여 게임 플레이 중단 없음
- **원클릭 분석**: 캐릭터 옆 🔍 버튼으로 간편하게 분석 요청

### 5. 스마트 말풍선 시스템
- **다양한 스타일**: 일반 대화, 조언, 경고, 성공, 생각, 공략 등 6가지 스타일
- **말풍선 제어**: X 버튼(닫기), 최소화 버튼(접기/펴기) 지원
- **윈도우 스타일 최소화**: 작업표시줄과 같은 "📋 공략 조언" 바로 최소화
- **200ms 애니메이션**: 부드러운 페이드 인/아웃으로 자연스러운 전환 효과
- **동적 위치 조정**: 화면 경계를 고려한 똑똑한 말풍선 위치 자동 조정
- **캐릭터를 따라다니는 동적 위치 조정** (물리 효과 중에도 추적)
- **반투명 배경**(90% 불투명도)으로 모든 게임 화면에서 선명한 가독성
- **텍스트 길이에 따른 적응형 표시 시간** (2-12초 자동 조절)
- **표시 중 캐릭터 자동 활동 일시정지**로 중단 없는 읽기 경험

### 6. 클릭 회피 움직임 시스템
- **실시간 클릭 감지**: 게임 오버레이 전체에서 사용자 클릭 위치 추적
- **스마트 회피**: 클릭 위치에서 150px 거리만큼 반대 방향으로 이동
- **시간 기반 회피**: 클릭 후 3초간 회피 효과 지속으로 충분한 회피 시간 제공
- **기존 랜덤 움직임 제거**: 목적 없는 랜덤 움직임을 제거하고 사용자 중심 움직임으로 전환
- **게임 플레이 방해 최소화**: 사용자가 클릭하려는 위치를 능동적으로 피해 게임 경험 향상

## 📝 Git 커밋 메시지 규칙

```
<type>: <subject>

<body>
```

- `feat`: 새로운 기능 추가
- `fix`: 버그 수정
- `docs`: 문서 수정
- `style`: 코드 포맷팅, 세미콜론 누락 등
- `refactor`: 코드 리팩토링
- `test`: 테스트 코드 추가
- `chore`: 빌드 업무 수정, 패키지 매니저 수정
``` 
